<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#050510" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Worlds End(s) — Play Novel</title>
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app" class="app">
    <div id="bg" class="bg"></div>

    <header class="topbar">
      <div class="title">WORLDS END(S)</div>
      <div class="topbar-actions">
        <button id="btnSave" class="mini">Save</button>
        <button id="btnLoad" class="mini">Load</button>
        <button id="btnMenu" class="mini">Menu</button>
      </div>
    </header>

    <main class="main">
      <section id="menu" class="panel hidden">
        <h1>Worlds End(s)</h1>
        <p class="sub">A Play Novel</p>
        <div class="menu-buttons">
          <button id="btnStart" class="primary">Start</button>
          <button id="btnContinue" class="secondary">Continue</button>
          <button id="btnClear" class="secondary">Clear Save</button>
        </div>
        <p class="hint">Tip: On iPhone, open in Safari → Share → “Add to Home Screen”.</p>
      </section>

      <section id="novel" class="novel">
        <div id="nameplate" class="nameplate hidden"></div>

        <div id="textbox" class="textbox">
          <div id="text" class="text"></div>
          <div class="controls">
            <button id="btnBack" class="secondary">Back</button>
            <button id="btnNext" class="primary">Next</button>
          </div>
        </div>

        <div id="choices" class="choices hidden"></div>
      </section>

      <section id="ending" class="panel hidden">
        <h2 id="endingTitle">The End</h2>
        <p id="endingBody" class="sub"></p>
        <div class="menu-buttons">
          <button id="btnRestart" class="primary">Restart</button>
          <button id="btnEndingLoad" class="secondary">Load Save</button>
        </div>
      </section>
    </main>

    <audio id="music" preload="auto" loop></audio>
    <audio id="sfx" preload="auto"></audio>

    <div id="toast" class="toast hidden"></div>
  </div>

  <script src="story.js"></script>
  <script>
    // Minimal PWA service worker (safe to ignore if not hosting)
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js").catch(()=>{});
    }
  </script>
</body>
</html>
